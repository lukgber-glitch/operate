================================================================================
                        OPERATE API STRUCTURE MAP
================================================================================
Base URL: https://operate.guru/api/v1
Authentication: JWT Bearer Token (required for most endpoints)
================================================================================

/health
└── GET - Health check (200 OK) ✓ WORKING

/auth
├── POST /login - User login (401 needs credentials) ✓ EXISTS
├── POST /register - User registration (400 needs data) ✓ EXISTS
├── POST /logout - User logout (401 needs token) ✓ EXISTS
├── POST /refresh - Refresh token (401 needs token) ✓ EXISTS
├── GET /me - Current user (401 needs token) ✓ EXISTS
├── GET /google - Google OAuth redirect (302) ✓ EXISTS
└── GET /google/callback - OAuth callback (302) ✓ EXISTS

/users
├── GET /me - Current user profile (401 needs token) ✓ EXISTS
└── PATCH /me - Update profile (401 needs token) ✓ EXISTS

/onboarding
├── GET /status - Onboarding status (401 needs token) ✓ EXISTS
└── POST /complete - Complete onboarding (401 needs token) ✓ EXISTS

/organisations/:orgId
│
├── /employees
│   ├── GET / - List employees ✓ IMPLEMENTED
│   ├── POST / - Create employee ✓ IMPLEMENTED
│   ├── GET /:id - Get employee ✓ IMPLEMENTED
│   ├── PATCH /:id - Update employee ✓ IMPLEMENTED
│   ├── DELETE /:id - Delete employee ✓ IMPLEMENTED
│   ├── POST /:id/restore - Restore employee ✓ IMPLEMENTED
│   ├── PATCH /:id/tax-info - Update tax info ✓ IMPLEMENTED
│   ├── PATCH /:id/banking - Update banking ✓ IMPLEMENTED
│   ├── GET /:id/contracts - List contracts ✓ IMPLEMENTED
│   ├── POST /:id/contracts - Create contract ✓ IMPLEMENTED
│   ├── PATCH /:employeeId/contracts/:contractId - Update contract ✓ IMPLEMENTED
│   └── POST /:employeeId/contracts/:contractId/terminate - Terminate ✓ IMPLEMENTED
│
├── /documents
│   ├── POST /upload - Upload document (multipart) ✓ IMPLEMENTED
│   ├── POST /classify - AI classify document ✓ IMPLEMENTED
│   ├── GET / - List documents ✓ IMPLEMENTED
│   ├── GET /:id - Get document ✓ IMPLEMENTED
│   ├── POST / - Create document metadata ✓ IMPLEMENTED
│   ├── PATCH /:id - Update document ✓ IMPLEMENTED
│   ├── DELETE /:id - Delete document ✓ IMPLEMENTED
│   ├── POST /:id/archive - Archive document ✓ IMPLEMENTED
│   ├── POST /:id/restore - Restore document ✓ IMPLEMENTED
│   └── GET /:id/versions - Version history ✓ IMPLEMENTED
│
├── /documents/folders
│   └── [Folder management endpoints] ✓ IMPLEMENTED
│
├── /settings
│   ├── GET / - Get settings ✓ IMPLEMENTED
│   └── PATCH / - Update settings ✓ IMPLEMENTED
│
├── /vendors
│   └── [Vendor management endpoints] ✓ IMPLEMENTED
│
├── /reconciliation
│   └── [Reconciliation endpoints] ✓ IMPLEMENTED
│
├── /costs
│   └── [Cost tracking endpoints] ✓ IMPLEMENTED
│
└── /migrations
    ├── /sevdesk - SevDesk migration ✓ IMPLEMENTED
    └── /xero - Xero migration ✓ IMPLEMENTED

/integrations
│
├── /elster (German Tax Filing)
│   ├── POST /vat-return - Submit VAT return (UStVA) ✓ IMPLEMENTED
│   ├── POST /income-tax-return - Submit income tax ✓ IMPLEMENTED
│   ├── POST /employee-tax - Submit employee tax ✓ IMPLEMENTED
│   ├── GET /status/:transferTicket - Check status ✓ IMPLEMENTED
│   ├── POST /vat-return/validate - Validate VAT return ✓ IMPLEMENTED
│   ├── GET /test-connection/:orgId - Test connection ✓ IMPLEMENTED
│   └── GET /submission-types - List submission types ✓ IMPLEMENTED
│
├── /stripe
│   ├── [Stripe integration endpoints] ✓ IMPLEMENTED
│   └── /webhooks - Stripe webhooks ✓ IMPLEMENTED
│
├── /plaid
│   └── [Plaid banking endpoints] ✓ IMPLEMENTED
│
├── /tink
│   └── [Tink banking endpoints] ✓ IMPLEMENTED
│
├── /truelayer
│   └── [TrueLayer banking endpoints] ✓ IMPLEMENTED
│
├── /gmail
│   └── [Gmail integration endpoints] ✓ IMPLEMENTED
│
├── /outlook
│   └── [Outlook integration endpoints] ✓ IMPLEMENTED
│
├── /xero
│   └── [Xero accounting endpoints] ✓ IMPLEMENTED
│
└── /quickbooks
    └── [QuickBooks endpoints] ✓ IMPLEMENTED

/tax
├── /vat-return - VAT return management ✓ IMPLEMENTED
├── /vat - VAT management ✓ IMPLEMENTED
├── /reports - Tax reports ✓ IMPLEMENTED
├── /deadlines - Tax deadlines ✓ IMPLEMENTED
├── /compliance - Compliance ✓ IMPLEMENTED
└── /fraud - Fraud prevention ✓ IMPLEMENTED

/chatbot
└── [AI chat endpoints] ✓ IMPLEMENTED

/clients
└── [CRM/Client management] ✓ IMPLEMENTED

/budgets
└── [Budget management] ✓ IMPLEMENTED

/notifications
└── [Notification management] ✓ IMPLEMENTED

/search
└── [Search endpoints] ✓ IMPLEMENTED

/currency
└── [Currency conversion] ✓ IMPLEMENTED

/gdpr
└── [GDPR compliance] ✓ IMPLEMENTED

/kyc
└── [KYC verification] ✓ IMPLEMENTED

/jobs
└── [Background jobs] ✓ IMPLEMENTED

/data-tools
└── [Data utilities] ✓ IMPLEMENTED

/subscription
└── [Subscription management] ✓ IMPLEMENTED

/usage
└── [Usage tracking] ✓ IMPLEMENTED

/imports
└── /datev - DATEV import ✓ IMPLEMENTED

/admin
├── /performance - Performance monitoring ✓ IMPLEMENTED
└── /dunning - Dunning management ✓ IMPLEMENTED

NOT IMPLEMENTED YET
================================================================================
/payroll (Planned - 5 endpoints)
├── GET / - List payroll runs
├── POST / - Create payroll run
├── GET /:id - Get payroll run
├── POST /:id/process - Process payroll
└── GET /runs - List all runs

AUTHENTICATION FLOW
================================================================================
1. Login:
   POST /auth/login
   Body: { email, password }
   Returns: { accessToken, refreshToken, user }

2. Get User Info:
   GET /users/me
   Headers: { Authorization: "Bearer {accessToken}" }
   Returns: { id, email, organizationId, ... }

3. Access Resources:
   GET /organisations/{organizationId}/employees
   Headers: { Authorization: "Bearer {accessToken}" }

PERMISSION SYSTEM (RBAC)
================================================================================
Permissions checked on all organization-scoped endpoints:
- EMPLOYEES_READ, EMPLOYEES_CREATE, EMPLOYEES_UPDATE, EMPLOYEES_DELETE
- DOCUMENTS_READ, DOCUMENTS_CREATE, DOCUMENTS_UPDATE, DOCUMENTS_DELETE
- And more...

ERROR CODES
================================================================================
200 - OK (Success)
201 - Created
204 - No Content (Successful deletion)
400 - Bad Request (Invalid data)
401 - Unauthorized (Missing or invalid token)
403 - Forbidden (Insufficient permissions)
404 - Not Found (Endpoint or resource doesn't exist)
409 - Conflict (Duplicate resource)
413 - Payload Too Large (File too big)
500 - Internal Server Error (0 encountered in testing)
503 - Service Unavailable (External service down)

SUPPORTED FILE TYPES (Documents)
================================================================================
- application/pdf
- image/jpeg
- image/jpg
- image/png
- image/gif
- image/webp

SUPPORTED INTEGRATIONS
================================================================================
Banking:
- Plaid (US)
- Tink (EU)
- TrueLayer (UK/EU)

Payments:
- Stripe

Tax:
- ELSTER (Germany)

Email:
- Gmail
- Outlook
- IMAP

Accounting:
- Xero
- QuickBooks

================================================================================
End of API Structure Map
================================================================================

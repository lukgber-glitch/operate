/**
 * Chatbot Module
 * AI Assistant chatbot for Operate/CoachOS platform
 */

import { Module } from '@nestjs/common';
import { ConfigModule } from '@nestjs/config';
import { ThrottlerModule } from '@nestjs/throttler';
import { DatabaseModule } from '../database/database.module';
import { ChatController } from './chat.controller';
import { ChatService } from './chat.service';
import { ClaudeService } from './claude.service';

@Module({
  imports: [
    ConfigModule,
    DatabaseModule,
    // Rate limiting: 50 messages per hour per user
    ThrottlerModule.forRoot([
      {
        name: 'chatbot',
        ttl: 3600000, // 1 hour in milliseconds
        limit: 50,
      },
    ]),
  ],
  controllers: [ChatController],
  providers: [ChatService, ClaudeService],
  exports: [ChatService, ClaudeService],
})
export class ChatbotModule {}

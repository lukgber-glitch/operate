# Plan 01-01: Backup Critical Files

## Overview
**Phase**: 1 - Backup & Takedown
**Goal**: Preserve all critical configuration files and create a secrets inventory before any changes
**Dependencies**: None (first task)

## Context

Before taking down the live site or making any changes, we must ensure all critical files are preserved locally. This includes:
- Environment variables (.env files)
- Server configurations
- Any secrets or API keys used in production

## Tasks

### Task 1: SSH into server and catalog all .env files
```bash
ssh cloudways "find ~/applications/eagqdkxvzv/public_html -name '.env*' -type f 2>/dev/null"
```

Expected locations:
- `apps/api/.env`
- `apps/web/.env`
- `apps/workers/.env` (if exists)
- Root `.env` (if exists)

### Task 2: Download all .env files to local backup
```bash
# Create backup directory
mkdir -p .planning/backups/env-files

# Download each .env file
scp cloudways:~/applications/eagqdkxvzv/public_html/apps/api/.env .planning/backups/env-files/api.env
scp cloudways:~/applications/eagqdkxvzv/public_html/apps/web/.env .planning/backups/env-files/web.env
```

### Task 3: Create secrets inventory
Document all environment variables across all .env files:
- Variable name
- Purpose
- Whether it's a secret (should be regenerated) or config (can be reused)

Output: `.planning/backups/SECRETS_INVENTORY.md`

## Verification

- [ ] All .env files downloaded to `.planning/backups/env-files/`
- [ ] SECRETS_INVENTORY.md created with full documentation
- [ ] Local backup verified (files are readable and contain expected content)
- [ ] No secrets committed to git (backups folder in .gitignore)

## Rollback

This is a read-only operation. No rollback needed as we're only copying files.

## Notes

- The backup folder `.planning/backups/` must be added to `.gitignore` immediately
- Never commit .env files or secrets to the repository
- Consider which secrets need rotation after this process
